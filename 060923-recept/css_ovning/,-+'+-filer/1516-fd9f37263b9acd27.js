(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1516],{13677:function(e,n,i){var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ContinueWatchingQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"history"}},type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"History"}}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"includeFullOppetArkiv"}},type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"onlyKidsContent"}},type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"keepWatching"},arguments:[{kind:"Argument",name:{kind:"Name",value:"history"},value:{kind:"Variable",name:{kind:"Name",value:"history"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"listPresentation"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"analyticsIdentifiers"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"listId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"listType"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"items"},arguments:[{kind:"Argument",name:{kind:"Name",value:"filter"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"includeFullOppetArkiv"},value:{kind:"Variable",name:{kind:"Name",value:"includeFullOppetArkiv"}}},{kind:"ObjectField",name:{kind:"Name",value:"onlyKidsContent"},value:{kind:"Variable",name:{kind:"Name",value:"onlyKidsContent"}}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ContentItem"},directives:[]}]}}]}}]}}],loc:{start:0,end:513}};t.loc.source={body:'#import "app/components/ContentItem/ContentItemFragment.graphql"\n\nquery ContinueWatchingQuery(\n    $history: [History!]\n    $includeFullOppetArkiv: Boolean\n    $onlyKidsContent: Boolean\n) {\n    keepWatching(history: $history) {\n        id\n        name\n        listPresentation\n        analyticsIdentifiers {\n            listId\n            listType\n        }\n        items(filter: { includeFullOppetArkiv: $includeFullOppetArkiv, onlyKidsContent: $onlyKidsContent }) {\n            ...ContentItem\n        }\n    }\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};t.definitions=t.definitions.concat(i(7254).definitions.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var n=e.name.value;return!a[n]&&(a[n]=!0,!0)}));var o={};function r(e,n){for(var i=0;i<e.definitions.length;i++){var t=e.definitions[i];if(t.name&&t.name.value==n)return t}}t.definitions.forEach(function(e){if(e.name){var n=new Set;(function e(n,i){if("FragmentSpread"===n.kind)i.add(n.name.value);else if("VariableDefinition"===n.kind){var t=n.type;"NamedType"===t.kind&&i.add(t.name.value)}n.selectionSet&&n.selectionSet.selections.forEach(function(n){e(n,i)}),n.variableDefinitions&&n.variableDefinitions.forEach(function(n){e(n,i)}),n.definitions&&n.definitions.forEach(function(n){e(n,i)})})(e,n),o[e.name.value]=n}}),e.exports=t,e.exports.ContinueWatchingQuery=function(e,n){var i={kind:e.kind,definitions:[r(e,n)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);var t=o[n]||new Set,a=new Set,d=new Set;for(t.forEach(function(e){d.add(e)});d.size>0;){var l=d;d=new Set,l.forEach(function(e){a.has(e)||(a.add(e),(o[e]||new Set).forEach(function(e){d.add(e)}))})}return a.forEach(function(n){var t=r(e,n);t&&i.definitions.push(t)}),i}(t,"ContinueWatchingQuery")},32301:function(e){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"RemoveFromKeepWatchingMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"videoIds"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"removeFromKeepWatching"},arguments:[{kind:"Argument",name:{kind:"Name",value:"videoIds"},value:{kind:"Variable",name:{kind:"Name",value:"videoIds"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"result"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:138}};n.loc.source={body:"mutation RemoveFromKeepWatchingMutation($videoIds: [String!]!) {\n    removeFromKeepWatching(videoIds: $videoIds) {\n        result\n    }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function t(e,n){for(var i=0;i<e.definitions.length;i++){var t=e.definitions[i];if(t.name&&t.name.value==n)return t}}n.definitions.forEach(function(e){if(e.name){var n=new Set;(function e(n,i){if("FragmentSpread"===n.kind)i.add(n.name.value);else if("VariableDefinition"===n.kind){var t=n.type;"NamedType"===t.kind&&i.add(t.name.value)}n.selectionSet&&n.selectionSet.selections.forEach(function(n){e(n,i)}),n.variableDefinitions&&n.variableDefinitions.forEach(function(n){e(n,i)}),n.definitions&&n.definitions.forEach(function(n){e(n,i)})})(e,n),i[e.name.value]=n}}),e.exports=n,e.exports.RemoveFromKeepWatchingMutation=function(e,n){var a={kind:e.kind,definitions:[t(e,n)]};e.hasOwnProperty("loc")&&(a.loc=e.loc);var o=i[n]||new Set,r=new Set,d=new Set;for(o.forEach(function(e){d.add(e)});d.size>0;){var l=d;d=new Set,l.forEach(function(e){r.has(e)||(r.add(e),(i[e]||new Set).forEach(function(e){d.add(e)}))})}return r.forEach(function(n){var i=t(e,n);i&&a.definitions.push(i)}),a}(n,"RemoveFromKeepWatchingMutation")},97730:function(e,n,i){"use strict";i.d(n,{Z:function(){return R}});var t=i(41844),a=i(5793),o=i(98518),r=i(3034),d=i(14635),l=i(76197),s=i(29041),u=i(34380),c=i(39833),m=i(78196),f=i(24535),v=i(55784),k=i(92432),p=i(62278),h=i(11474),g=i(43872),y=i(13677),N=i.n(y),x=i(43331),b=i(33782),F=i(96719),I=i(82729),S=i(24859),C=i(41429),w=i(87379);function T(){let e=(0,I._)(["\n    height: 100%;\n\n    cursor: auto;\n    box-sizing: border-box;\n    margin-bottom: 24px;\n"]);return T=function(){return e},e}function O(){let e=(0,I._)(["\n    text-decoration: underline;\n    background: none;\n    color: ",";\n    border: none;\n    padding: 0;\n    ","\n\n    &:hover {\n        cursor: pointer;\n    }\n"]);return O=function(){return e},e}let E=w.ZP.div.withConfig({componentId:"sc-1a3707de-0"})(T()),W=w.ZP.button.withConfig({componentId:"sc-1a3707de-1"})(O(),S.O5,(0,C.fk)(2));var A=i(50470);let D=e=>{let{handleOnButtonClick:n}=e;return(0,t.jsx)(E,{children:(0,t.jsxs)(b.Z,{children:["Din Forts\xe4tt titta-lista uppdateras inte. Du m\xe5ste till\xe5ta cookies f\xf6r F\xf6rb\xe4ttrad upplevelse f\xf6r att listan ska uppdateras med ditt tittande."," ",(0,t.jsxs)(W,{type:"button",onClick:n,children:["Till\xe5t cookies f\xf6r F\xf6rb\xe4ttrad upplevelse",(0,t.jsx)(F.Z,{icon:A._s.ARROW_RIGHT,marginLeft:5})]})]})})};var L=i(73815),j=i(15699);function K(){let e=(0,I._)(["\n    margin-bottom: 65px;\n\n    @media "," {\n        margin-bottom: 80px;\n    }\n"]);return K=function(){return e},e}let V=(0,w.ZP)(j.Z4).withConfig({componentId:"sc-9a8b3661-0"})(K(),L.U.GteMedium),P=()=>{let e=(0,a.Z)(),{isOptedIn:n,setValues:i}=(0,v.useContext)(p.Q),o=()=>{i({functionality_storage:!0})};return n(h.y.FUNCTIONALITY)?null:(0,t.jsxs)(V,{children:[(0,t.jsx)(x.X6,{children:"Forts\xe4tt titta"}),(0,t.jsx)(D,{handleOnButtonClick:()=>{e((0,f.WK)()),o()}})]})};var _=i(32301),Z=i.n(_);let M=e=>{let{history:n,listTracking:i,onItemClick:o,onItemImpression:d,onlyKidsContent:y}=e,x=(0,a.Z)(),b=(0,u.TL)(),F=(0,k.m8)(),{isLoggedIn:I}=(0,v.useContext)(g.J),[S,C]=(0,k.aM)({query:N(),variables:{history:n,includeFullOppetArkiv:l.Z.FLAG_ENABLE_ALL_OA,onlyKidsContent:y},requestPolicy:"cache-and-network",context:(0,v.useMemo)(()=>({preferGetMethod:I,includeAuthWhenLoggedIn:!0}),[I])});(0,v.useEffect)(()=>(window.addEventListener("refetch-continue-watching",C),()=>{window.removeEventListener("refetch-continue-watching",C)}),[C]);let{data:w,fetching:T,error:O}=S,{isOptedIn:E,setValues:W}=(0,v.useContext)(p.Q),A=()=>{W({functionality_storage:!0})};if(T)return(0,t.jsx)(r.Z,{},"continue-watching-placeholder");if(!w||O)return null;let L=e=>{b((0,s.eM)(e))},j=()=>{b((0,m.B9)({heading:"Ett fel intr\xe4ffade",text:"Det gick inte att ta bort ur listan. F\xf6rs\xf6k igen senare!"}))},K=async e=>{try{var n,i;let t=await F.mutation(Z(),{videoIds:e.map(e=>e.videoId)},{includeAuthWhenLoggedIn:!0}).toPromise();(null===(n=t.data)||void 0===n?void 0:null===(i=n.removeFromKeepWatching)||void 0===i?void 0:i.result)?C():j()}catch(e){j()}},V=e=>{I?K(e):L(e)};return(0,t.jsx)(c.Z,{id:"pers",items:w.keepWatching.items,headerText:w.keepWatching.name,onDeleteItems:V,deletableItems:E(h.y.FUNCTIONALITY),onItemClick:o,listTracking:i,onItemImpression:d,banner:I||E(h.y.FUNCTIONALITY)?null:(0,t.jsx)(D,{handleOnButtonClick:()=>{x((0,f.WK)()),A()}}),autoPlay:!0,listPresentation:w.keepWatching.listPresentation,showInfoOnHover:!0},"continue-watch-list")},Q=e=>{let{listTracking:n,onItemImpression:i,onlyKidsContent:a=!1}=e,l=(0,d.q)(),{isOptedIn:s}=(0,v.useContext)(p.Q),u=(0,o.t)(),{isLoggedIn:c}=(0,v.useContext)(g.J);return l?c?(0,t.jsx)(M,{history:u,listTracking:n,onItemImpression:i,onlyKidsContent:a}):u&&u.length?(0,t.jsx)(M,{history:u,listTracking:n,onItemImpression:i,onlyKidsContent:a}):s(h.y.FUNCTIONALITY)?null:(0,t.jsx)(P,{}):(0,t.jsx)(r.Z,{},"continue-watching-placeholder")};var R=Q},98518:function(e,n,i){"use strict";i.d(n,{t:function(){return l}});var t=i(55784),a=i(20766),o=i(29041),r=i(34380),d=i(43872);function l(){let{isLoggedIn:e}=(0,t.useContext)(d.J),n=(0,r.CG)(o.EM);if(e)return null;let i=(0,a.x)(n);return i}},83557:function(e,n,i){"use strict";i.d(n,{w:function(){return t}});let t=e=>void 0===e?null:{browserWidth:e.innerWidth,browserHeight:e.innerHeight,screenWidth:e.screen.availWidth,screenHeight:e.screen.availHeight,screenPixelRatio:e.devicePixelRatio}}}]);